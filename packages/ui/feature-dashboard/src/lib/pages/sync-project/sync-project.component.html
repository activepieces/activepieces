<div class="ap-w-full  ap-px-[30px] ap-pt-[50px]">
    <div class="ap-h-full">
        <ap-page-title title="Project Settings" i18n-title>
        </ap-page-title>

        <ap-page-title title="Git Sync" i18n-title>
            <div underTitle class="ap-text-description ap-typography-body-2 ap ap-mt-2" i18n>
                Streamline environments management by integrating with Git repos.
            </div>
        </ap-page-title>
        <ng-container *ngIf="showUpgrade">
            <div class="ap-mb-4">
                <ap-upgrade-note></ap-upgrade-note>
            </div>

        </ng-container>
        <div
            class="ap-border ap-border-solid ap-border-border ap-rounded-md ap-typography-body-1 ap-p-4 ap-flex ap-items-center ap-justify-between ap-w-[700px] ap-mb-8">
            <ng-container *ngIf="(currentRepo$ | async) === null || (currentRepo$ | async) === undefined ">
                <div i18n>
                    Configure the Git repo you want to sync with.
                </div>
                <ap-button actionButton btnColor="primary" btnSize='medium' (buttonClicked)="configureNewRepo()"
                    [disabled]="showUpgrade" [matTooltip]="configureButtonTooltip" i18n>
                    Configure Repo
                </ap-button>
            </ng-container>
            <ng-container *ngIf="currentRepo$ | async as currentRepo">
                <svg-icon src="assets/img/custom/git.svg" class="ap-fill-body ap-w-[32px] ap-h-[32px]"
                    [applyClass]="true"></svg-icon>
                <div i18n>
                    Remote URL: <b>{{currentRepo?.remoteUrl}}</b> <br>
                    Branch: <b>{{currentRepo?.branch}}</b>
                </div>
                <ap-icon-button i18n-tooltipText tooltipText="Disconnect" iconFilename="disconnect.svg" [width]="18"
                    [height]="18" (buttonClicked)="disconnect()" color="warn">
                </ap-icon-button>
            </ng-container>
        </div>
        <ng-container *ngIf="currentRepo$ | async as currentRepo">
            <div class="ap-flex ap-flex-col ap-gap-4 ap-divide-y ap-divide-dividers  ap-w-[700px]">
                <div class="ap-flex ap-justify-between ap-items-center">
                    <div>
                        Pushing {{(currentProject$ | async)?.displayName}} to your Git repo will <b>overwrite
                            the repo</b>.
                    </div>

                    <ap-button *ngIf="(currentProject$ | async) as currentProject" actionButton btnColor="primary"
                        btnSize='medium' btnStyle="stroked" (buttonClicked)="push(currentProject?.displayName || '')">
                        <div class="ap-flex ap-gap-2 ap-w-[3.9375rem]">
                            <svg-icon src="/assets/img/custom/upload.svg"
                                class="ap-w-[20px] ap-h-[20px] ap-fill-primary" [applyClass]="true">
                            </svg-icon> Push
                        </div>

                    </ap-button>
                </div>
                <div class="ap-flex ap-justify-between ap-items-center ap-pt-4">
                    <div>
                        Pulling from your Git repo will <b>overwrite {{(currentProject$ | async)?.displayName}}</b>.
                    </div>
                    <ap-button actionButton btnColor="primary" btnSize='medium' btnStyle="stroked"
                        (buttonClicked)="pull()" [darkLoadingSpinner]="true" [disabled]="pushLoading$ | async"
                        [loading]="(pullLoading$ | async) || false">
                        <div class="ap-flex ap-gap-2 ap-w-[3.9375rem]">
                            <svg-icon src="/assets/img/custom/download.svg"
                                class="ap-w-[20px] ap-h-[20px] ap-fill-primary" [applyClass]="true">
                            </svg-icon>
                            Pull
                        </div>
                    </ap-button>
                </div>
            </div>
        </ng-container>
    </div>

    <ng-container *ngIf="dialogOpened$ | async"></ng-container>
    <ng-container *ngIf="disconnect$ | async"></ng-container>
    <ng-container *ngIf="push$ | async"></ng-container>
    <ng-container *ngIf="pull$ | async"></ng-container>