{
  "name": "server-api",
  "version": "0.0.1",
  "private": true,
  "type": "commonjs",
  "dependencies": {
    "@activepieces/ee-shared": "workspace:*",
    "@activepieces/engine": "workspace:*",
    "@activepieces/pieces-framework": "workspace:*",
    "@activepieces/server-shared": "workspace:*",
    "@activepieces/shared": "workspace:*",
    "@ai-sdk/anthropic": "^3.0.0",
    "@ai-sdk/azure": "^3.0.0",
    "@ai-sdk/google": "^3.0.0",
    "@ai-sdk/google-vertex": "^3.0.0",
    "@ai-sdk/mcp": "1.0.11",
    "@ai-sdk/openai": "^3.0.0",
    "@ai-sdk/openai-compatible": "2.0.16",
    "@ai-sdk/provider": "^3.0.0",
    "@ai-sdk/replicate": "2.0.8",
    "@authenio/samlify-node-xmllint": "2.0.0",
    "@aws-sdk/client-s3": "3.974.0",
    "@aws-sdk/s3-request-presigner": "3.894.0",
    "@bull-board/api": "6.10.1",
    "@bull-board/fastify": "6.10.1",
    "@electric-sql/pglite": "0.3.14",
    "@fastify/basic-auth": "6.2.0",
    "@fastify/cors": "11.0.1",
    "@fastify/formbody": "8.0.2",
    "@fastify/http-proxy": "11.3.0",
    "@fastify/multipart": "9.0.3",
    "@fastify/otel": "0.9.3",
    "@fastify/rate-limit": "10.3.0",
    "@fastify/swagger": "9.5.1",
    "@fastify/type-provider-typebox": "5.1.0",
    "@modelcontextprotocol/sdk": "1.26.0",
    "@openrouter/ai-sdk-provider": "2.1.1",
    "@openrouter/sdk": "0.2.9",
    "@opentelemetry/api": "1.9.0",
    "@opentelemetry/api-logs": "0.206.0",
    "@opentelemetry/auto-instrumentations-node": "0.65.0",
    "@opentelemetry/exporter-metrics-otlp-http": "0.206.0",
    "@opentelemetry/exporter-metrics-otlp-proto": "0.206.0",
    "@opentelemetry/exporter-trace-otlp-http": "0.206.0",
    "@opentelemetry/resources": "2.1.0",
    "@opentelemetry/sdk-logs": "0.206.0",
    "@opentelemetry/sdk-metrics": "2.1.0",
    "@opentelemetry/sdk-node": "0.206.0",
    "@opentelemetry/sdk-trace-base": "2.1.0",
    "@opentelemetry/semantic-conventions": "1.37.0",
    "@segment/analytics-next": "1.72.0",
    "@segment/analytics-node": "2.2.0",
    "@sinclair/typebox": "0.34.11",
    "@socket.io/redis-adapter": "8.3.0",
    "ai": "^6.0.0",
    "ai-gateway-provider": "3.1.1",
    "async-mutex": "0.4.0",
    "axios": "1.13.5",
    "bcrypt": "6.0.0",
    "bullmq": "5.61.0",
    "bullmq-otel": "1.0.1",
    "content-disposition": "0.5.4",
    "dayjs": "1.11.9",
    "dotenv": "17.2.3",
    "decompress": "4.2.1",
    "deep-equal": "2.2.2",
    "fastify": "5.7.3",
    "fastify-favicon": "5.0.0",
    "fastify-plugin": "5.0.1",
    "fastify-raw-body": "5.0.0",
    "fastify-socket": "5.1.2",
    "fastify-xml-body-parser": "2.2.0",
    "firebase-scrypt": "2.2.0",
    "fuse.js": "7.0.0",
    "http-status-codes": "2.2.0",
    "jsonwebtoken": "9.0.1",
    "jwks-rsa": "3.1.0",
    "mime-types": "2.1.35",
    "mustache": "4.2.0",
    "nanoid": "3.3.8",
    "node-cron": "3.0.3",
    "nodemailer": "7.0.11",
    "object-sizeof": "2.6.3",
    "p-limit": "2.3.0",
    "pino": "10.1.0",
    "qs": "6.14.2",
    "samlify": "2.10.0",
    "semver": "7.6.0",
    "server-worker": "workspace:*",
    "simple-git": "3.21.0",
    "socket.io": "4.8.1",
    "stripe": "18.2.1",
    "tiny-lru": "11.4.7",
    "tinycolor2": "1.6.0",
    "typeorm": "0.3.26",
    "typeorm-pglite": "0.3.2",
    "zod": "4.1.13"
  },
  "devDependencies": {
    "@types/bcrypt": "5.0.0",
    "@types/content-disposition": "0.5.9",
    "@types/decompress": "4.2.4",
    "@types/deep-equal": "1.0.1",
    "@types/is-base64": "1.1.1",
    "@types/jsonwebtoken": "9.0.10",
    "@types/mime-types": "2.1.1",
    "@types/mustache": "4.2.4",
    "@types/node-cron": "3.0.11",
    "@types/nodemailer": "6.4.9",
    "@types/qs": "6.9.7",
    "@types/semver": "7.5.6",
    "@types/tinycolor2": "1.4.5",
    "@activepieces/piece-facebook-leads": "workspace:*",
    "@activepieces/piece-intercom": "workspace:*",
    "@activepieces/piece-slack": "workspace:*",
    "@activepieces/piece-square": "workspace:*"
  },
  "scripts": {
    "build": "tsc -p tsconfig.app.json --noEmit",
    "serve": "cd ../../.. && npx tsx --tsconfig packages/server/api/tsconfig.app.json packages/server/api/src/bootstrap.ts",
    "lint": "eslint 'src/**/*.ts'",
    "test": "npm run test-ce && npm run test-ee && npm run test-cloud",
    "test-unit": "vitest run test/unit --bail 1 --passWithNoTests=false",
    "test-ce-command": "vitest run test/integration/ce --bail 1 --passWithNoTests=false",
    "test-ee-command": "vitest run test/integration/ee --bail 1 --passWithNoTests=false",
    "test-cloud-command": "vitest run test/integration/cloud --bail 1 --passWithNoTests=false",
    "test-ce": "export $(cat .env.tests | xargs) && AP_EDITION=ce npm run test-ce-command",
    "test-ee": "export $(cat .env.tests | xargs) && AP_EDITION=ee npm run test-ee-command",
    "test-cloud": "export $(cat .env.tests | xargs) && AP_EDITION=cloud npm run test-cloud-command",
    "check-migrations": "echo 'üîç Checking for schema changes...' && export $(cat .env.tests | xargs) && export AP_DEV_PIECES='' && export AP_ENVIRONMENT=dev && AP_EDITION=ce && ts-node -r tsconfig-paths/register -P tsconfig.app.json ../../../node_modules/typeorm/cli.js migration:run -d src/app/database/migration-data-source.ts > /dev/null 2>&1 && echo 'Checking for schema drift...' && ts-node -r tsconfig-paths/register -P tsconfig.app.json ../../../node_modules/typeorm/cli.js migration:generate -p -d src/app/database/migration-data-source.ts src/app/database/migration/postgres/check --dryrun --check || (echo '‚ùå ERROR: Schema changes detected without migration!' && exit 1) && echo '‚úÖ No missing migrations detected'",
    "db": "ts-node -r tsconfig-paths/register -P tsconfig.app.json ../../../node_modules/typeorm/cli.js",
    "db-migration": "export $(cat .env.tests | xargs) && export AP_DEV_PIECES='' && export AP_ENVIRONMENT=dev && export AP_EDITION=ce && ts-node -r tsconfig-paths/register -P tsconfig.app.json ../../../node_modules/typeorm/cli.js migration:generate -p -d src/app/database/migration-data-source.ts",
    "test:docker": "UID=\"$(id -u)\" GID=\"$(id -g)\" docker compose --profile full -f docker-compose.test.yml up --exit-code-from app --attach app"
  }
}
